language: python
python:
  - '3.4'
  - '3.5'
  - '3.5-dev'
  - 'nightly'
  
sudo: true

addons:
  mariadb: 10.1
  
install:
  - cd $HOME
  - pip3 install cleo
  - pip3 install psycopg2
  - pip3 install pystratum

before_script:
  - psql --version
  - psql -c "create user test with password 'test';" -U postgres
  - psql -c "create database test owner=test;" -U postgres
  - psql -c "create schema test authorization test;" -U postgres test

script: 
  - cd $TRAVIS_BUILD_DIR
  - cat test/ddl/create_tables.sql | psql -Utest test
  - python3 -m unittest discover -s test -p *Test.py
